(function(){function require(e,t,n){var r=require.resolve(e),i=require.modules[r];if(null==r)throw n=n||e,t=t||"root",new Error('failed to require "'+n+'" from "'+t+'"');return i.exports||(i.exports={},i.client=i.component=!0,i.call(this,i,i.exports,require.relative(r))),i.exports}require.modules={},require.aliases={},require.resolve=function(e){var t=e,n=e+".js",r=e+".json",i=e+"/index.js",s=e+"/index.json";return require.modules[n]&&n||require.modules[r]&&r||require.modules[i]&&i||require.modules[s]&&s||require.modules[t]&&t||require.aliases[i]},require.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){var n=require.modules[e];if(!n)throw new Error('failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(e){function n(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function r(t){var n=t;return t=r.resolve(t),require(t,e,n)}var t=require.normalize(e,"..");return r.resolve=function(r){if("."!=r.charAt(0)){var i=e.split("/"),s=n(i,"deps")+1;return s||(s=0),r=i.slice(0,s+1).join("/")+"/deps/"+r,r}return require.normalize(t,r)},r.exists=function(e){return!!require.modules[r.resolve(e)]},r},require.register("learnboost-engine.io-client/lib/index.js",function(e,t,n){e.exports=n("./socket")}),require.register("learnboost-engine.io-client/lib/parser.js",function(e,t,n){var r=n("./util"),i=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=r.keys(i),o={type:"error",data:"parser error"};t.encodePacket=function(e){var t=i[e.type];return undefined!==e.data&&(t+=String(e.data)),""+t},t.decodePacket=function(e){var t=e.charAt(0);return Number(t)!=t||!s[t]?o:e.length>1?{type:s[t],data:e.substring(1)}:{type:s[t]}},t.encodePayload=function(e){if(!e.length)return"0:";var n="",r;for(var i=0,s=e.length;i<s;i++)r=t.encodePacket(e[i]),n+=r.length+":"+r;return n},t.decodePayload=function(e){if(e=="")return[o];var n=[],r="",i,s,u;for(var a=0,f=e.length;a<f;a++){var l=e.charAt(a);if(":"!=l)r+=l;else{if(""==r||r!=(i=Number(r)))return[o];s=e.substr(a+1,i);if(r!=s.length)return[o];if(s.length){u=t.decodePacket(s);if(o.type==u.type&&o.data==u.data)return[o];n.push(u)}a+=i,r=""}}return r!=""?[o]:n}}),require.register("learnboost-engine.io-client/lib/socket.js",function(e,t,n){function a(e){if(!(this instanceof a))return new a(e);if("string"==typeof e){var t=r.parseUri(e);e=arguments[1]||{},e.host=t.host,e.secure=t.protocol=="https"||t.protocol=="wss",e.port=t.port}e=e||{},this.secure=null!=e.secure?e.secure:u.location&&"https:"==location.protocol,this.host=e.host||e.hostname||(u.location?location.hostname:"localhost"),this.port=e.port||(u.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},this.query.uid=l(),this.upgrade=!1!==e.upgrade,this.resource=e.resource||"default",this.path=(e.path||"/engine.io").replace(/\/$/,""),this.path+="/"+this.resource+"/",this.forceJSONP=!!e.forceJSONP,this.timestampParam=e.timestampParam||"t",this.timestampRequests=!!e.timestampRequests,this.flashPath=e.flashPath||"",this.transports=e.transports||["polling","websocket","flashsocket"],this.readyState="",this.writeBuffer=[],this.policyPort=e.policyPort||843,this.open(),a.sockets.push(this),a.sockets.evs.emit("add",this)}function f(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l(){return String(Math.random()).substr(5)+String(Math.random()).substr(5)}var r=n("./util"),i=n("./transports"),s=n("./emitter"),o=n("debug")("engine-client:socket");e.exports=a;var u="undefined"!=typeof window?window:u;s(a.prototype),a.protocol=1,a.sockets=[],a.sockets.evs=new s,a.Socket=a,a.Transport=n("./transport"),a.Emitter=n("./emitter"),a.transports=n("./transports"),a.util=n("./util"),a.parser=n("./parser"),a.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=f(this.query);t.transport=e,this.id&&(t.sid=this.id);var n=new i[e]({host:this.host,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort});return n},a.prototype.open=function(){this.readyState="opening";var e=this.createTransport(this.transports[0]);e.open(),this.setTransport(e)},a.prototype.setTransport=function(e){var t=this;this.transport&&(o("clearing existing transport"),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.flush()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},a.prototype.probe=function(e){function i(i){if(n)return;n=!0;var s=new Error("probe error: "+i);s.transport=t.name,t.close(),t=null,o('probe transport "%s" failed because of error: %s',e,i),r.emit("error",s)}o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;t.once("open",function(){if(n)return;o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(s){if(n)return;if("pong"==s.type&&"probe"==s.data)o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){if(n)return;if("closed"==r.readyState||"closing"==r.readyState)return;o("changing transport and sending upgrade packet"),t.removeListener("error",i),r.emit("upgrade",t),r.setTransport(t),t.send([{type:"upgrade"}]),t=null,r.upgrading=!1,r.flush()});else{o('probe transport "%s" failed',e);var u=new Error("probe error");u.transport=t.name,r.emit("error",u)}})}),t.once("error",i),t.open(),this.once("close",function(){t&&(o("socket closed prematurely - aborting probe"),n=!0,t.close(),t=null)}),this.once("upgrading",function(e){t&&e.name!=t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),t.close(),t=null)})},a.prototype.onOpen=function(){o("socket open"),this.readyState="open",this.emit("open"),this.onopen&&this.onopen.call(this),this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},a.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState){o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat");switch(e.type){case"open":this.onHandshake(r.parseJSON(e.data));break;case"pong":this.ping();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("message",e.data);var n={data:e.data};n.toString=function(){return e.data},this.onmessage&&this.onmessage.call(this,n)}}else o('packet received with socket readyState "%s"',this.readyState)},a.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=e.upgrades,this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.ping(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat)},a.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){if("closed"==t.readyState)return;t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},a.prototype.ping=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.sendPacket("ping"),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},a.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.writeBuffer=[])},a.prototype.write=a.prototype.send=function(e){return this.sendPacket("message",e),this},a.prototype.sendPacket=function(e,t){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.flush()},a.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.onClose("forced close"),o("socket closing - telling transport to close"),this.transport.close(),this.transport.removeAllListeners();return this},a.prototype.onError=function(e){this.emit("error",e),this.onClose("transport error",e)},a.prototype.onClose=function(e,t){"closed"!=this.readyState&&(o('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.readyState="closed",this.emit("close",e,t),this.onclose&&this.onclose.call(this),this.id=null)}}),require.register("learnboost-engine.io-client/lib/transport.js",function(e,t,n){function o(e){this.path=e.path,this.host=e.host,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState=""}var r=n("./util"),i=n("./parser"),s=n("./emitter");e.exports=o,s(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this},o.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this},o.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){this.onPacket(i.decodePacket(e))},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}}),require.register("learnboost-engine.io-client/lib/emitter.js",function(e,t,n){var r;try{r=n("emitter")}catch(i){r=n("emitter-component")}e.exports=r,r.prototype.addEventListener=r.prototype.on,r.prototype.removeEventListener=r.prototype.off,r.prototype.removeListener=r.prototype.off,r.prototype.removeAllListeners=function(){this._callbacks={}}}),require.register("learnboost-engine.io-client/lib/util.js",function(e,t,n){var r=!1,i="undefined"!=typeof window?window:i;t.inherits=function(t,n){function r(){}r.prototype=n.prototype,t.prototype=new r},t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},t.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},t.load=function(e){if(i.document&&document.readyState==="complete"||r)return e();t.on(i,"load",e,!1)},"undefined"!=typeof window&&t.load(function(){r=!0}),t.defer=function(e){if(!t.ua.webkit||"undefined"!=typeof importScripts)return e();t.load(function(){setTimeout(e,100)})};var s=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,u=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,a=/(?:^|:|,)(?:\s*\[)+/g,f=/^\s+/,l=/\s+$/;t.parseJSON=function(e){if("string"!=typeof e||!e)return null;e=e.replace(f,"").replace(l,"");if(i.JSON&&JSON.parse)return JSON.parse(e);if(s.test(e.replace(o,"@").replace(u,"]").replace(a,"")))return(new Function("return "+e))()},t.ua={},t.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),t.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),t.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent),t.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent),t.ua.ios="undefined"!=typeof navigator&&/^(iPad|iPhone|iPod)$/.test(navigator.platform),t.ua.ios6=t.ua.ios&&/OS 6_/.test(navigator.userAgent),t.request=function(r){if("undefined"!=typeof process){var i=n("xmlhttprequest").XMLHttpRequest;return new i}if(r&&"undefined"!=typeof XDomainRequest&&!t.ua.hasCORS)return new XDomainRequest;try{if("undefined"!=typeof i&&(!r||t.ua.hasCORS))return new i}catch(s){}if(!r)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(s){}};var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,h=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.parseUri=function(e){var t=c.exec(e||""),n={},r=14;while(r--)n[h[r]]=t[r]||"";return n},t.qs=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]));return t}}),require.register("learnboost-engine.io-client/lib/transports/index.js",function(e,t,n){function f(e){var t,n=!1,s=!1;if(a.location){var o="https:"==location.protocol,f=location.port;Number(f)!=f&&(f=o?443:80),n=e.host!=location.hostname||f!=e.port,s=e.secure!=o}return t=u.request(n),s&&a.XDomainRequest&&t instanceof a.XDomainRequest?new i(e):t&&!e.forceJSONP?new r(e):new i(e)}var r=n("./polling-xhr"),i=n("./polling-jsonp"),s=n("./websocket"),o=n("./flashsocket"),u=n("../util");t.polling=f,t.websocket=s,t.flashsocket=o;var a="undefined"!=typeof window?window:a}),require.register("learnboost-engine.io-client/lib/transports/polling.js",function(e,t,n){function a(e){r.call(this,e)}var r=n("../transport"),i=n("../util"),s=n("../parser"),o=n("debug")("engine.io-client:polling");e.exports=a;var u="undefined"!=typeof window?window:u;i.inherits(a,r),a.prototype.name="polling",a.prototype.doOpen=function(){this.poll()},a.prototype.pause=function(e){function r(){o("paused"),n.readyState="paused",e()}var t=0,n=this;this.readyState="pausing";if(this.polling||!this.writable){var i=0;this.polling&&(o("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){o("pre-pause polling complete"),--i||r()})),this.writable||(o("we are currently writing - waiting to pause"),i++,this.once("drain",function(){o("pre-pause writing complete"),--i||r()}))}else r()},a.prototype.poll=function(){o("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},a.prototype.onData=function(e){o("polling got data %s",e);var t=s.decodePayload(e);for(var n=0,r=t.length;n<r;n++){"opening"==this.readyState&&this.onOpen();if("close"==t[n].type){this.onClose();return}this.onPacket(t[n])}this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():o('ignoring poll - transport state "%s"',this.readyState)},a.prototype.doClose=function(){o("sending close packet"),this.send([{type:"close"}])},a.prototype.write=function(e){var t=this;this.writable=!1,this.doWrite(s.encodePayload(e),function(){t.writable=!0,t.emit("drain")})},a.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";if(u.ActiveXObject||i.ua.android||i.ua.ios6||this.timestampRequests)e[this.timestampParam]=+(new Date);return e=i.qs(e),this.port&&("https"==t&&this.port!=443||"http"==t&&this.port!=80)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.host+n+this.path+e}}),require.register("learnboost-engine.io-client/lib/transports/polling-xhr.js",function(e,t,n){function f(){}function l(e){r.call(this,e),u.location&&(this.xd=e.host!=u.location.hostname||u.location.port!=e.port)}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.async=!1!==e.async,this.data=undefined!=e.data?e.data:null,this.create()}var r=n("./polling"),i=n("../util"),s=n("../emitter"),o=n("debug")("engine.io-client:polling-xhr");e.exports=l,e.exports.Request=c;var u="undefined"!=typeof window?window:u,a=u[["Active"].concat("Object").join("X")];i.inherits(l,r),l.prototype.doOpen=function(){var e=this;i.defer(function(){r.prototype.doOpen.call(e)})},l.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,new c(e)},l.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e}),r=this;n.on("success",t),n.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=n},l.prototype.doPoll=function(){o("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},s(c.prototype),c.prototype.create=function(){var e=this.xhr=i.request(this.xd),t=this;e.open(this.method,this.uri,this.async);if("POST"==this.method)try{e.setRequestHeader?e.setRequestHeader("Content-type","text/plain;charset=UTF-8"):e.contentType="text/plain"}catch(n){}this.xd&&u.XDomainRequest&&e instanceof XDomainRequest?(e.onerror=function(e){t.onError(e)},e.onload=function(){t.onData(e.responseText)},e.onprogress=f):("withCredentials"in e&&(e.withCredentials=!0),e.onreadystatechange=function(){var n;try{if(4!=e.readyState)return;200==e.status||1223==e.status?n=e.responseText:t.onError(e.status)}catch(r){t.onError(r)}undefined!==n&&t.onData(n)}),o("sending xhr with url %s | data %s",this.uri,this.data),e.send(this.data),a&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup()},c.prototype.cleanup=function(){this.xhr.onreadystatechange=f,this.xhr.onload=this.xhr.onerror=f;try{this.xhr.abort()}catch(e){}a&&delete c.requests[this.index],this.xhr=null},c.prototype.abort=function(){this.cleanup()},a&&(c.requestsCount=0,c.requests={},u.attachEvent("onunload",function(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}))}),require.register("learnboost-engine.io-client/lib/transports/polling-jsonp.js",function(e,t,n){function f(){}function l(e){r.call(this,e),u||(s.___eio||(s.___eio=[]),u=s.___eio),this.index=u.length;var t=this;u.push(function(e){t.onData(e)}),this.query.j=this.index}var r=n("./polling"),i=n("../util");e.exports=l;var s="undefined"!=typeof window?window:s,o=/\n/g,u,a=0;i.inherits(l,r),l.prototype.doOpen=function(){var e=this;i.defer(function(){r.prototype.doOpen.call(e)})},l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri();var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.script=e,i.ua.gecko&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){function a(){f(),t()}function f(){n.iframe&&n.form.removeChild(n.iframe);try{u=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){u=document.createElement("iframe"),u.name=n.iframeId}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this;if(!this.form){var r=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,u;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=s,r.method="POST",r.setAttribute("accept-charset","utf-8"),i.name="d",r.appendChild(i),document.body.appendChild(r),this.form=r,this.area=i}this.form.action=this.uri(),f(),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a}}),require.register("learnboost-engine.io-client/lib/transports/websocket.js",function(e,t,n){function a(e){r.call(this,e)}function f(){return"undefined"!=typeof process?n("ws"):u.WebSocket||u.MozWebSocket}var r=n("../transport"),i=n("../parser"),s=n("../util"),o=n("debug")("engine.io-client:websocket");e.exports=a;var u="undefined"!=typeof window?window:u;s.inherits(a,r),a.prototype.name="websocket",a.prototype.doOpen=function(){if(!this.check())return;var e=this;this.socket=new(f())(this.uri()),this.socket.onopen=function(){e.onOpen()},this.socket.onclose=function(){e.onClose()},this.socket.onmessage=function(t){e.onData(t.data)},this.socket.onerror=function(t){e.onError("websocket error",t)}},a.prototype.write=function(e){for(var t=0,n=e.length;t<n;t++)this.socket.send(i.encodePacket(e[t]))},a.prototype.doClose=function(){typeof this.socket!="undefined"&&this.socket.close()},a.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&this.port!=443||"ws"==t&&this.port!=80)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+(new Date)),e=s.qs(e),e.length&&(e="?"+e),t+"://"+this.host+n+this.path+e},a.prototype.check=function(){var e=f();return!!e&&!("__initialize"in e&&this.name===a.prototype.name)}}),require.register("learnboost-engine.io-client/lib/transports/flashsocket.js",function(e,t,n){function u(e){r.call(this,e),this.flashPath=e.flashPath,this.policyPort=e.policyPort}function f(e,t){if(a[e])return t();var n=document.createElement("script"),r=!1;s('loading "%s"',e),n.onload=n.onreadystatechange=function(){if(r||a[e])return;var i=n.readyState;if(!i||"loaded"==i||"complete"==i)s('loaded "%s"',e),n.onload=n.onreadystatechange=null,r=!0,a[e]=!0,t()},n.async=1,n.src=e;var i=document.getElementsByTagName("head")[0];i.insertBefore(n,i.firstChild)}function l(e,t){function n(r){if(!e[r])return t();f(e[r],function(){n(++r)})}n(0)}var r=n("./websocket"),i=n("../util"),s=n("debug")("engine.io-client:flashsocket");e.exports=u;var o=global[["Active"].concat("Object").join("X")];i.inherits(u,r),u.prototype.name="flashsocket",u.prototype.doOpen=function(){function e(e){return function(){var t=Array.prototype.join.call(arguments," ");s("[websocketjs %s] %s",e,t)}}if(!this.check())return;WEB_SOCKET_LOGGER={log:e("debug"),error:e("error")},WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0,WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0,"undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf");var t=[this.flashPath+"web_socket.js"];"undefined"==typeof swfobject&&t.unshift(this.flashPath+"swfobject.js");var n=this;l(t,function(){n.ready(function(){WebSocket.__addTask(function(){r.prototype.doOpen.call(n)})})})},u.prototype.doClose=function(){if(!this.socket)return;var e=this;WebSocket.__addTask(function(){r.prototype.doClose.call(e)})},u.prototype.write=function(){var e=this,t=arguments;WebSocket.__addTask(function(){r.prototype.write.apply(e,t)})},u.prototype.ready=function(e){function t(){u.loaded||(843!=n.policyPort&&WebSocket.loadFlashPolicyFile("xmlsocket://"+n.host+":"+n.policyPort),WebSocket.__initialize(),u.loaded=!0),e.call(n)}if(!(typeof WebSocket!="undefined"&&"__initialize"in WebSocket)||!swfobject)return;if(swfobject.getFlashPlayerVersion().major<10)return;var n=this;if(document.body)return t();i.load(t)},u.prototype.check=function(){if("undefined"!=typeof process)return!1;if(typeof WebSocket=="undefined"||"__initialize"in WebSocket){if(o){var e=null;try{e=new o("ShockwaveFlash.ShockwaveFlash")}catch(t){}if(e)return!0}else for(var n=0,r=navigator.plugins.length;n<r;n++)for(var i=0,s=navigator.plugins[n].length;i<s;i++)if(navigator.plugins[n][i].description=="Shockwave Flash")return!0;return!1}return!1};var a={}}),require.register("component-json/index.js",function(e,t,n){e.exports="undefined"==typeof JSON?n("json-fallback"):JSON}),require.register("learnboost-socket.io-protocol/index.js",function(e,t,n){function s(e){return{type:t.ERROR,data:"parser error"}}var r;try{r=n("json")}catch(i){r=JSON}t.protocol=1,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.encode=function(e){var t="",n=!1;return t+=e.type,e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),e.id&&(n&&(t+=",",n=!1),t+=e.id),e.data&&(n&&(t+=","),t+=r.stringify(e.data)),t},t.decode=function(e){var n={},i=0;n.type=Number(e.charAt(0));if(null==t.types[n.type])return s();if("/"==e.charAt(i+1)){n.nsp="";while(++i){var o=e.charAt(i);if(","==o)break;n.nsp+=o;if(i+1==e.length)break}}else n.nsp="/";var u=e.charAt(i+1);if(""!=u&&Number(u)==u){n.id="";while(++i){var o=e.charAt(i);if(null==o||Number(o)!=o){--i;break}n.id+=e.charAt(i);if(i+1==e.length)break}}if(e.charAt(++i))try{n.data=r.parse(e.substr(i))}catch(a){return s()}return n}}),require.register("component-emitter/index.js",function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},r.prototype.off=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=n.indexOf(t._off||t);return~r&&n.splice(r,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),require.register("component-bind/index.js",function(e,t,n){var r=[].slice;e.exports=function(e,t){"string"==typeof t&&(t=e[t]);if("function"!=typeof t)throw new Error("bind() requires a function");var n=[].slice.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}}),require.register("component-json-fallback/index.js",function(module,exports,require){var JSON={};(function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","  ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),module.exports=JSON}),require.register("timoxley-to-array/index.js",function(e,t,n){e.exports=function(t){if(typeof t=="undefined")return[];if(t===null)return[null];if(t===window)return[window];if(typeof t=="string")return[t];if(Array.isArray(t))return t.slice();if(typeof t.length!="number")return[t];if(typeof t=="function")return[t];var n=[];for(var r=0;r<t.length;r++)(t.hasOwnProperty(r)||r in t)&&n.push(t[r]);return n.length?n:[]}}),require.register("visionmedia-debug/index.js",function(e,t,n){"undefined"==typeof window?e.exports=n("./lib/debug"):e.exports=n("./debug")}),require.register("visionmedia-debug/debug.js",function(e,t,n){function r(e){return r.enabled(e)?function(t){var n=new Date,i=n-(r[e]||n);r[e]=n,t=e+" "+t+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}e.exports=r,r.names=[],r.skips=[],r.enable=function(e){localStorage.debug=e;var t=(e||"").split(/[\s,]+/),n=t.length;for(var i=0;i<n;i++)e=t[i].replace("*",".*?"),e[0]==="-"?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,n=6e4,r=60*n;return e>=r?(e/r).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},window.localStorage&&r.enable(localStorage.debug)}),require.register("socket.io/lib/index.js",function(e,t,n){function u(e,t){t=t||{};var n=r(e),i=n.href,u;if(t.forceNew||!1===t.multiplex)u=s(i,t);else{var a=n.id;o[a]||(o[a]=s(i,t)),u=o[a]}return u.socket(n.pathname||"/")}var r=n("./url"),i=n("socket.io-parser"),s=n("./manager");e.exports=t=u;var o=t.managers={};if("undefined"!=typeof process){var a=n("fs").readFileSync;t.source=a(__dirname+"/../socket.io-client.js")}t.protocol=i.protocol,t.connect=u,t.Manager=n("./manager"),t.Socket=n("./socket"),t.Emitter=n("./emitter")}),require.register("socket.io/lib/manager.js",function(e,t,n){function h(e,t){if(!(this instanceof h))return new h(e,t);t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.reconnection(t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?1e4:t.timeout),this.readyState="closed";if(!e||!e.write)e=i(e,t);this.engine=e,this.open()}var r=n("./url"),i=n("./engine"),s=n("./socket"),o=n("./emitter"),u=n("socket.io-parser"),a=n("./on"),f=n("debug")("socket.io-client:manager"),l,c;e.exports=h,o(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.open=h.prototype.connect=function(e){if(~this.readyState.indexOf("open"))return this;var t=this.engine,n=this,r;this.readyState="opening";var i=a(t,"open",c(this,"onopen")),s=a(t,"error",function(t){n.cleanup(),n.emit("connect_error",t);if(e){var r=new Error("Connection error");r.data=t,e(r)}});if(!1!==this._timeout){var o=this._timeout;f("connect attempt will timeout after %d",o);var u=setTimeout(function(){f("connect attempt timed out after %d",o),i.destroy(),s.destroy(),t.close(),t.emit("error","timeout"),n.emit("connect_timeout",o)},o);r={destroy:function(){clearTimeout(u)}},this.subs.push(r)}return this.subs.push(i),this.subs.push(s),this},h.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose")))},h.prototype.ondata=function(e){this.emit("packet",u.decode(e))},h.prototype.onerror=function(e){this.emit("error",e)},h.prototype.socket=function(e){var t=this.nsps[e];return t||(t=new s(this,e),this.nsps[e]=t),t},h.prototype.destroy=function(e){delete this.nsps[e.nsp],l.length(this.nsps)||this.close()},h.prototype.cleanup=function(){var e;while(e=this.subs.shift())e.destroy()},h.prototype.close=h.prototype.disconnect=function(){this.skipReconnect=!0,this.cleanup(),this.engine.close()},h.prototype.onclose=function(){this.cleanup();if(!this.skipReconnect){var e=this;this.reconnect()}},h.prototype.reconnect=function(){var e=this;this.attempts++;if(this.attempts>this._reconnectionAttempts)this.emit("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this._reconnectionDelay;t=Math.min(t,this._reconnectionDelayMax),f("will wait %d before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){f("attemptign reconnect"),e.open(function(t){if(t)return f("reconnect attempt error"),e.reconnect(),e.emit("reconnect_error",t.data);f("reconnect success"),e.onreconnect()})},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emit("reconnect",e)};try{c=n("bind"),l=n("object")}catch(p){c=n("bind-component"),l=n("object-component")}}),require.register("socket.io/lib/engine.js",function(e,t,n){var r;try{r=n("engine.io-client")}catch(i){r=n("engine.io")}e.exports=r}),require.register("socket.io/lib/socket.js",function(e,t,n){function c(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.open(),this.buffer=[],this.connected=!1}var r=n("socket.io-parser"),i=n("./emitter"),s=n("to-array"),o=n("debug")("socket.io-client:socket"),u=n("./on"),a;e.exports=t=c;var f=t.events=["connect","disconnect","error"],l=i.prototype.emit;i(c.prototype),c.prototype.open=c.prototype.connect=function(){var e=this.io;e.open(),"open"==this.io.readyState&&this.onopen(),this.subs=[u(e,"open",a(this,"onopen")),u(e,"error",a(this,"onerror"))]},c.prototype.send=function(){var e=s(arguments);return e.shift("message"),this.emit.apply(this,e),this},c.prototype.emit=function(e){if(~f.indexOf(e))l.apply(this,arguments);else{var t=s(arguments),n={type:r.EVENT,args:t};"function"==typeof t[t.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.packet(n)}return this},c.prototype.packet=function(e){e.nsp=this.nsp,this.io.write(r.encode(e))},c.prototype.onerror=function(e){this.emit("error",e)},c.prototype.onopen=function(){var e=this.io;this.subs.push(u(e,"packet",a(this,"onpacket")),u(e,"close",a(this,"onclose")))},c.prototype.onclose=function(e){o("close (%s)",e),this.emit("disconnect",e)},c.prototype.onpacket=function(e){if(e.nsp!=this.nsp)return;switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},c.prototype.onevent=function(e){var t=e.data||[];o("emitting event %j",t),e.id&&(o("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?l.apply(this,t):this.buffer.push(t)},c.prototype.ack=function(){var e=this,t=!1;return function(){if(t)return;var n=s(arguments);o("sending ack %j",n),e.packet({type:r.ACK,data:n})}},c.prototype.onack=function(e){o("calling ack %s with %j",e.id,e.data),this.acks[e.id].apply(this,e.data),delete this.acks[e.id]},c.prototype.onconnect=function(){this.emit("connect"),this.connected=!0,this.emitBuffered()},c.prototype.emitBuffered=function(){for(var e=0;e<this.buffer.length;e++)l.apply(this,this.buffer[e]);this.buffer=[]},c.prototype.ondisconnect=function(){o("server disconnect (%s)",this.nsp),this.destroy()},c.prototype.destroy=function(){o("destroying socket (%s)",this.nsp);for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.io.destroy(this)},c.prototype.close=c.prototype.disconnect=function(){o("performing disconnect (%s)",this.nsp),this.packet(r.PACKET_DISCONNECT);for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();return this.io.destroy(this),this.onclose("io client disconnect"),this};try{a=n("bind")}catch(h){a=n("bind-component")}}),require.register("socket.io/lib/emitter.js",function(e,t,n){var r;try{r=n("emitter")}catch(i){r=n("emitter-component")}e.exports=r,r.prototype.removeListener=function(e,t){return this.off(e,t)},r.prototype.removeAllListeners=function(){return this._callbacks={},this}}),require.alias("learnboost-engine.io-client/lib/index.js","socket.io/deps/engine.io/lib/index.js"),require.alias("learnboost-engine.io-client/lib/parser.js","socket.io/deps/engine.io/lib/parser.js"),require.alias("learnboost-engine.io-client/lib/socket.js","socket.io/deps/engine.io/lib/socket.js"),require.alias("learnboost-engine.io-client/lib/transport.js","socket.io/deps/engine.io/lib/transport.js"),require.alias("learnboost-engine.io-client/lib/emitter.js","socket.io/deps/engine.io/lib/emitter.js"),require.alias("learnboost-engine.io-client/lib/util.js","socket.io/deps/engine.io/lib/util.js"),require.alias("learnboost-engine.io-client/lib/transports/index.js","socket.io/deps/engine.io/lib/transports/index.js"),require.alias("learnboost-engine.io-client/lib/transports/polling.js","socket.io/deps/engine.io/lib/transports/polling.js"),require.alias("learnboost-engine.io-client/lib/transports/polling-xhr.js","socket.io/deps/engine.io/lib/transports/polling-xhr.js"),require.alias("learnboost-engine.io-client/lib/transports/polling-jsonp.js","socket.io/deps/engine.io/lib/transports/polling-jsonp.js"),require.alias("learnboost-engine.io-client/lib/transports/websocket.js","socket.io/deps/engine.io/lib/transports/websocket.js"),require.alias("learnboost-engine.io-client/lib/transports/flashsocket.js","socket.io/deps/engine.io/lib/transports/flashsocket.js"),require.alias("learnboost-engine.io-client/lib/index.js","socket.io/deps/engine.io/index.js"),require.alias("component-emitter/index.js","learnboost-engine.io-client/deps/emitter/index.js"),require.alias("visionmedia-debug/index.js","learnboost-engine.io-client/deps/debug/index.js"),require.alias("visionmedia-debug/debug.js","learnboost-engine.io-client/deps/debug/debug.js"),require.alias("learnboost-socket.io-protocol/index.js","socket.io/deps/socket.io-parser/index.js"),require.alias("component-json/index.js","learnboost-socket.io-protocol/deps/json/index.js"),require.alias("component-emitter/index.js","socket.io/deps/emitter/index.js"),require.alias("component-bind/index.js","socket.io/deps/bind/index.js"),require.alias("component-json-fallback/index.js","socket.io/deps/json-fallback/index.js"),require.alias("timoxley-to-array/index.js","socket.io/deps/to-array/index.js"),require.alias("visionmedia-debug/index.js","socket.io/deps/debug/index.js"),require.alias("visionmedia-debug/debug.js","socket.io/deps/debug/debug.js"),"undefined"==typeof module?window.eio=require("socket.io"):module.exports=require("socket.io")})()