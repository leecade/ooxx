<<<<<<< HEAD
<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>map</title>
	<style type="text/css">
	html{height:100%}
	body{height:100%;margin:0px;padding:0px}
	#map{height:100%}
	#position {
		position: absolute;
		z-index: 10;
		width: 100px;
		height: 100px;
		right: 0;
		top: 0;
		border: 1px solid #000;
		background: #fff;
	}
	</style>
	<script src="http://api.map.baidu.com/api?v=1.4" type="text/javascript"></script>
</head>
<body>
	<div id="map"></div>
	<div id="position"></div>
	<script>
	var map = new BMap.Map("map");          // 创建地图实例
	map.enableScrollWheelZoom();
	map.enableInertialDragging();
	var point = new BMap.Point(116.404, 39.915);  // 创建点坐标
	map.centerAndZoom(point, 15);
	map.addControl(new BMap.NavigationControl());  
	var loc = new BMap.GeolocationControl({enableAutoLocation: true});
	map.addControl(loc);
	loc.location = function (noAutoPan) {
		!this.Of && this.Je ? (!noAutoPan && this.i.Zc(this.Je), this.zq()) : (this.sj && this.Ce("startLocation"), (!noAutoPan && this.$x()));
	}
	setInterval(function () {
		loc.location(true);
	}, 3000);
	loc.addEventListener("locationSuccess", function (e) {
		console.log(e.point.lng + " " + e.point.lat)
		document.getElementById("position").innerHTML = e.point.lng + " " + e.point.lat;
	});
	</script>
</body>
=======
<!DOCTYPE html>
<!--[if IEMobile 7 ]>    <html class="no-js iem7"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="description" content="">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <meta http-equiv="cleartype" content="on">

        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/touch/apple-touch-icon-144x144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/touch/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/touch/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="img/touch/apple-touch-icon-57x57-precomposed.png">
        <link rel="shortcut icon" href="img/touch/apple-touch-icon.png">

        <!-- Tile icon for Win8 (144x144 + tile color) -->
        <meta name="msapplication-TileImage" content="img/touch/apple-touch-icon-144x144-precomposed.png">
        <meta name="msapplication-TileColor" content="#222222">


        <!-- For iOS web apps. Delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
        
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="">

        <meta name="apple-touch-fullscreen" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
        

        <!-- This script prevents links from opening in Mobile Safari. https://gist.github.com/1042026 -->
        
        <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
        

        <link rel="stylesheet" href="/css/app.css">

        <style type="text/css">
        html{height:100%}
        body{height:100%;margin:0px;padding:0px}
        #map{height:100%}
        #pos2{ left: 100px}
        .pos{
        	position: absolute;
        	z-index: 10;
        	width: 100px;
        	height: 100px;
        	left: 0;
        	top: 0;
        	border: 1px solid #000;
        	background: #fff;
        }
        </style>
    </head>
    <body>
    	<div id="map"></div>
		<div id="position" class="pos"></div>
		<div id="pos2" class="pos"></div>

        <script src="/js/lib/zepto.js"></script>
        <script src="/js/app.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
            g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
            s.parentNode.insertBefore(g,s)}(document,"script"));
        </script>

        <script src="http://api.map.baidu.com/api?v=1.4" type="text/javascript"></script>
        <script>
        var map = new BMap.Map("map");          // 创建地图实例
        map.enableScrollWheelZoom();
        map.enableInertialDragging();
        var point = new BMap.Point(116.404, 39.915);  // 创建点坐标
        map.centerAndZoom(point, 15);
        map.addControl(new BMap.NavigationControl());  
        var loc = new BMap.GeolocationControl();
        map.addControl(loc);




        var getloc = function(callback) {
            return navigator.geolocation.getCurrentPosition(callback, function() {
                
            }, {enableHighAccuracy: true})
        }

        setInterval(function () {
        	loc.location();

        	navigator.geolocation.getCurrentPosition(
	            successCallback,
	            errorCallback_highAccuracy,
	            {maximumAge:600000, timeout:5000, enableHighAccuracy: true}
	        ); 
        }, 1000);

        loc.addEventListener("locationSuccess", function (e) {
        	document.getElementById("position").innerHTML = e.point.lng + " " + e.point.lat;
        });














        

        function errorCallback_highAccuracy(position) {
            if (error.code == error.TIMEOUT)
            {
                // Attempt to get GPS loc timed out after 5 seconds, 
                // try low accuracy location
                $('body').append("attempting to get low accuracy location");
                navigator.geolocation.getCurrentPosition(
                       successCallback, 
                       errorCallback_lowAccuracy,
                       {maximumAge:600000, timeout:10000, enableHighAccuracy: false});
                return;
            }
            
            var msg = "<p>Can't get your location (high accuracy attempt). Error = ";
            if (error.code == 1)
                msg += "PERMISSION_DENIED";
            else if (error.code == 2)
                msg += "POSITION_UNAVAILABLE";
            msg += ", msg = "+error.message;
            
            $('body').append(msg);
        }

        function errorCallback_lowAccuracy(position) {
            var msg = "<p>Can't get your location (low accuracy attempt). Error = ";
            if (error.code == 1)
                msg += "PERMISSION_DENIED";
            else if (error.code == 2)
                msg += "POSITION_UNAVAILABLE";
            else if (error.code == 3)
                msg += "TIMEOUT";
            msg += ", msg = "+error.message;
            
            $('body').append(msg);
        }

        function successCallback(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            // $('body').append("<p>Your location is: " + latitude + "," + longitude+" </p><p>Accuracy="+position.coords.accuracy+"m");


            $("#pos2").html([position.coords.latitude, position.coords.longitude, position.coords.accuracy].join("|"))
        }



        
        </script>
    </body>
>>>>>>> ae62f5c495393c7aa62fda36520f7fa4f2af0f7d
</html>